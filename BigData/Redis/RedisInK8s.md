1. Deploy config map

# To use Redis Cluster
## Stateful Set
* We need to use a stateful set to give them a stable DNS name to run each of our pods
* Each Pods needs to be individually addressable
* Persistant Network Identity across reboots

---
## Headless Service
```
spec:
    ClusterIP: None 

```
This gives every pod a stable dns record

---
# Config File:
 ```
 VolumenMounts:
    - name redis-config
      vountpath:...
```

Use Volume mount instead of configMap because Redis writes to config and without that it will not presist changes.

---
# Init Container
I Am redis 0 else get the config file


---





apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU2RENDQXRDZ0F3SUJBZ0lRRS90bjN5cG83cmpldjR1a1FFRGQvakFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWdGdzB5TVRBNU1UWXlNak15TWpkYUdBOHlNRFV4TURreE5qSXlOREl5TjFvdwpEVEVMTUFrR0ExVUVBeE1DWTJFd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUMwCktvdDc5cjcvK0NEZG0xNU5lNkJld0NBMyt2Z1pBRW1Cb0pBM0wzQVFiRnVsZG5NTWRoRDdFSkVOU2UreTluanoKZzk2d3ZUbG9QNUx6SUtPQzNGai9DcnRVdUZ2S25Na0ZaeXRDWm16RFU4UWJ4WUt6K1lzNUprVEp5WHNVdi9nMApyOTZkRFY3ZGhZUHBNdDBNRHBxUHdRSExoOHQ4WEYzczJhcHVwOVdlME5mdnpPTXN2ZTVOU29SUFFMcEcxZ0YyClJId2RYaXJuSGpNSFdoRC9PdEREVXZ2ZFdoZFRuSFg4eUttNnZjWDNxb1IvVjBKVW5OaDE2Qk15dkhTMmlPWUoKRENrRmh5QW5GODdjYWEzVitnNU94OUlTdjNYYnliZmlwUEp4NEhjb21WalJIejJQbkpHQnpnY0l6U08wMnN2bwpmV3c1Zml5bGVLRkNZekdnTG9ZZFN0aE5UdTZEdTVXdVNzbUFCQmFXVG1qNTQwNVdpS1Y3dUVQbmwvN3RNelJZCmc2OHg5bXNSOHlmUVc4aHRWOWpieHlOck9ZYk1xRTREcm9CSjJUV1NWdU9mYkI5R2xDRWxrSFRYUXd3Zm9SWHkKRHEzSHZZSmpWVm1YaTRkMEV0WnZVNmwzK2UwL25zY1Q1UkxOdStTUjNTVml3STk5UmtZWndVMHV4WTliY3Y3VgpXeTFNWTdjZG56VG12bkRVVDQ3eDNqWkxSVVo4bXlYMXllcG4ranByVTVCT2NUd3gwNUJENVpPVHUrcGtUYUxrClRwcGp1QTNMYjNoQTNGTnEwY1djdkJSRnJ1clYwWGFWYU83Tk5qSTMyTWxMUFR6dWZiV2J2RHRMUmZodDlRelYKY3FIQmZPNGJHdU9hWXFlVTcxWVdvRTJRUytyLzJNeEk5cHdZYkk4K053SURBUUFCbzBJd1FEQU9CZ05WSFE4QgpBZjhFQkFNQ0FxUXdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QWRCZ05WSFE0RUZnUVVlTWtFSmM4eGRRR0F1ZkZmCkM5d2t0NGNWR1lNd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQkFFWjQzQWtrRW1wNUtMckphMHUxZ3RaaTZsYnQKM2g3Q0x2b0Z5L3IrREZKRWFERWsvRGlwRTdvVk9hNXErWUpla1AvSnMrRWh3TXA3eEZDc0xIaldpaDRkVDBDUgpxSHVxRzBXTklQSzJOVUNzNFEydGo5NU1JcVpaZGtmeXdpOHZtVUZQSXVEMmlZWmtEWTFQUGxxRUl6RXZodGxiCi9aVmE2ekRvRWdPNEx5aVF4SnVXRHQ0L0FPQWJWWGRrVkZQczVITTJLNGFENVRvVjk1RVpDSDJ6ZHpaZitURlYKeFRpVEMzTmx3L3k2YlhFenlnKzl2Rk9tdnc0YUFiTXorR1Q3ZE13cnBDZEE1VnlYRmVzcHRnNE8xY1NoUXdCVQpnWGxyQ1A2NDgzN1Blbjd3MXZJeUdPOGwxSUpobGdTSGNqQ25HWHhmUndkKzV4OGJaQjFJMVErdkhqN2FPNHNZCnE2blNVZmpmMHhCZEhUaXl0Z1g3TU9PZ3AwQ0NXNjJScG5xSGFlbE5hQ2x3eWJtc1RkQzJaS0J1R3pNWkExSUIKMlUyKzJwanBiSUtGaEsraDJ2cVd6Rm8yZzBLTU14cjUyMG9ZS1RsaUpGWnNrbzBYWGxrYXR6bVI1ckswcGVkcgo1c0RkNnhlLzhRTEdpTVdZWGs2Z01YRGlLdnA4dEtBQXhOWG9GQ0lCT1JjUUthZjZ2Tk5ZNVlLVXpNVGo2UUR0ClVtdkw0cll0NkUwZk8xTnVxMnZVWHpQc2hRSkhjZlZmeHRUWlcwcGoyemZSVHFDZ2JLT3RpL3RCaDJ4RDJBK3QKQlJFRnBUR3BuY2hIYjdPaEQwcmc4VnV2NDBaWUorVGtpVlhTSHlBNFZlR0szREdwMnFidmhLQkwzOXZ4Vzk2QQp1S2JuNzJsM1h6c3lBQnU4Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    server: https://pgfcluster-dns-aa86c016.hcp.eastus2.azmk8s.io:443
  name: PGFCluster
contexts:
- context:
    cluster: PGFCluster
    user: clusterUser_PeterFreeborn_PGFCluster
  name: PGFCluster
current-context: PGFCluster
kind: Config
preferences: {}
users:
- name: clusterUser_PeterFreeborn_PGFCluster
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZIakNDQXdhZ0F3SUJBZ0lSQUpnNi9PYUhNTmRsZzhpTUlqcmVJTTh3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTWpFd09URTJNakl6TWpJM1doY05Nak13T1RFMk1qSTBNakkzV2pBdwpNUmN3RlFZRFZRUUtFdzV6ZVhOMFpXMDZiV0Z6ZEdWeWN6RVZNQk1HQTFVRUF4TU1iV0Z6ZEdWeVkyeHBaVzUwCk1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBMWFUZ2V6WEdiYUE4b05MMUdrcFEKeXRtTy9odFhqYlZIUkR2ejJoS3djQndYeU4ySHEyUEFsd3NRQnV6VEc0aGYxK2w1RENldkJhbDllUVo4ZWc4TgpEMHBZVFlIM0I5c2JnWEM0aTdlSHM0bE9JRks2VWt1RENnak5mZzQxT1U5bzlTZVJMUUVmaTFuejhrZE1valJUClJvdzJwSWlGcXAvbWVTSzh0T3d3bzZwK2tUUUNaU0s2TDZnc1Q4YmdLQi9HSThiclB0cnZyQ05YdjViblJWS08KY0lBbEJEb3I3bndiZE9rSFV6TTBxR3RZSnJpNkdSTjBJZlpTMVZLV2NGVm9INzgxVFFxam1GbzRmL1lONVBPQwpTdGF5UHNIaFU3TDIwWjloK0phZVhtVXAzYUpuUUVzTEd2VDhWM3JMcmlxYlRqeEFGUEdkK0ZQQzVYWTNpZEdqClo5RGkrWXdKV2Z4VlVMQWZDbFdhbmJkeXprL2NTSkdXK2w3VENMSHNWUXNvdUVoMCtmbFk0K1orWVFtMG9SU0QKTWNnZTRPVHNjZW4vdHpxRHIxQ012dithVHNsZllsOW16U0VhaFdTYUtlYlJ1aXc1dVpjRkwwSlJPRFB4V25LSApRdElqblNTYmg1NFZMVkI5ZGptT3BrSXhOMTVsRnBDQTdmM1dJYXFZRlE0cXpNdndVQTI5bDZzbldkU3dkZFovCnlYdVoxbFRicVNGUkF2WnNjeFEwd2NSbmJsMUNZVTZlV2ZIbFRPK0RCNks2NTZaWkRiekhVckV2SGc3Nm9uUW8KeTB1d011Ukhhc3BzKzBCYXNMcEVtZk42K1lYQjZ5bTkrOFNKczlrMkt6dDNaekRlOEVLQy9MUE9TS0ova29NZgpTck9LbmJFRjIwbkJoMVI5T2NGMnlnc0NBd0VBQWFOV01GUXdEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CTUdBMVVkCkpRUU1NQW9HQ0NzR0FRVUZCd01DTUF3R0ExVWRFd0VCL3dRQ01BQXdId1lEVlIwakJCZ3dGb0FVZU1rRUpjOHgKZFFHQXVmRmZDOXdrdDRjVkdZTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnSUJBRVFkbFdGTEJUSDR5WTduL2w2cwpEellDZ0JTRGl3RlhHSWlSRnQ3b3Z4R2M3UjZnSzhkYzhtUHNqOTRxY2kwaklyMjgzVjJiKy9UNXF5VC9tUEZSCnJDWC9NamxBOXJmRGcxSENNRTFvNVRadjdkdVNPWnM5OXhWakdjV0wybmJmbllwd1ZibitCdUlKQTJ4bHBSbEQKeDcrRTNnR3B3NmZ0a2ROZXV4WU91eGhUYVBObWRyWUFXU2hEeFlXbHdRbFI5QmtobTNsbFdlQUJ4dWtUK2k1dAo3bjBURU1mWWQ3bVd2M1RLbFlRaHcvczFUM2thR3FkeVJkOGNpOUJVWmpnaEZsMG5qeUZrM1N4WGNRVFVHc1N1CkhtZmNuN2xCVURNckxxMHBrS1NLUFVQOWFRSnZGS1B5M29WL3BtN1pqY3BQdFNnR05NYjQ4eG1lTUcxMGlHUDYKbUNpTVVVYzlPUWVDYTZ4Z2dRNEpSTFJkSU0vbjNhYzNDdVptdlhsRXpRWUFYd0lCM0ZIc2FKWGFGaEZ4K3RERApwcSt4VExESUVyamwvNWhUZXlPVHlKcktCNWZ3RGNHS3lRT2Jjbm81Y3M1SWlrb3IzSWs5U1pBV1Q5bUdiRDRMCnA0ci96SGtzeDFBR3pUcXFJdnQ5UDBBTlE2RHFnU0xOOVhPTk1kMTJYYi9jUUNrWU1WMGhCRGRQc0VXdXhldGoKRTEwYUtYMVlZZ1BOY25wR3V4MHd6d0dpOFAzTGFOTHd5amVCenlFN3RaQmdza0YrWkYzR0t6dTBlamZGQmdXUwprYllrQitBTU5HQ2l6WjE0Y0R6U2pMRGF5ckY4b0dodmFSZzNnM3k2WG9DMG95UVVweTZPNWx5eC8zSC9NMnJoCjZyL2puNDZPV0JXdVNDbFczNVoyVzZJLwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBMWFUZ2V6WEdiYUE4b05MMUdrcFF5dG1PL2h0WGpiVkhSRHZ6MmhLd2NCd1h5TjJICnEyUEFsd3NRQnV6VEc0aGYxK2w1RENldkJhbDllUVo4ZWc4TkQwcFlUWUgzQjlzYmdYQzRpN2VIczRsT0lGSzYKVWt1RENnak5mZzQxT1U5bzlTZVJMUUVmaTFuejhrZE1valJUUm93MnBJaUZxcC9tZVNLOHRPd3dvNnAra1RRQwpaU0s2TDZnc1Q4YmdLQi9HSThiclB0cnZyQ05YdjViblJWS09jSUFsQkRvcjdud2JkT2tIVXpNMHFHdFlKcmk2CkdSTjBJZlpTMVZLV2NGVm9INzgxVFFxam1GbzRmL1lONVBPQ1N0YXlQc0hoVTdMMjBaOWgrSmFlWG1VcDNhSm4KUUVzTEd2VDhWM3JMcmlxYlRqeEFGUEdkK0ZQQzVYWTNpZEdqWjlEaStZd0pXZnhWVUxBZkNsV2FuYmR5emsvYwpTSkdXK2w3VENMSHNWUXNvdUVoMCtmbFk0K1orWVFtMG9SU0RNY2dlNE9Uc2Nlbi90enFEcjFDTXZ2K2FUc2xmCllsOW16U0VhaFdTYUtlYlJ1aXc1dVpjRkwwSlJPRFB4V25LSFF0SWpuU1NiaDU0VkxWQjlkam1PcGtJeE4xNWwKRnBDQTdmM1dJYXFZRlE0cXpNdndVQTI5bDZzbldkU3dkZFoveVh1WjFsVGJxU0ZSQXZac2N4UTB3Y1JuYmwxQwpZVTZlV2ZIbFRPK0RCNks2NTZaWkRiekhVckV2SGc3Nm9uUW95MHV3TXVSSGFzcHMrMEJhc0xwRW1mTjYrWVhCCjZ5bTkrOFNKczlrMkt6dDNaekRlOEVLQy9MUE9TS0ova29NZlNyT0tuYkVGMjBuQmgxUjlPY0YyeWdzQ0F3RUEKQVFLQ0FnQmx0eVB4UlQ3OXZvWmZBMUVTZlVOTjhKcTF2SXJJdXYvOUtwWUV3MVVoYXg2ZjBXamdYcE80MWRtQgprb3RIMW52Ykxoc2xnRmRCMk5vV0h0Snd3bTJ6VS9BS3BzL1grNmR5enhudDJ5bE9meGFsS1Azd1pHYzFCYy9nCkxoK0U4NXZDN0YyZ0VhTFZFN1NqS3ZML1h1NHU3bDZ0b3hvUWpDU01rODlJVEJNME9ONGRmNmVNUXlabHZpbXEKcWNMYkY1V2NQdjZOWkdzcmg0QWxoVkVDbmpXV3RrdnBZVkM5TUhWYUNnQWt5b0pObFIzWkFhWUlma3lTUnRaVgpIZ2JsNEtPOFNhcTB6VlhxR1RwQklnS25lSkFWMVhYemp4Y2FaR0JDbVNGcDJ6djNNUzduaUlTa0JaWjU5UjJYCkFLMnNkRGlRM1BxZGZoTjV3VmRQTENOeENGQkZJNURTNldDYjBNSy85MXdVQkl4b01pbkJ3QTlRZW9CTjRkakwKZGNvWWNVWWVyU3BoMDArNTlhamdpSGRvM0pjY1lWZjNCZVpBbklBb3hHR3ozWU9iUC9oRjBSaUlGcVJsNk85aApXVm5KOGFDa0tVLzArelpWaURlU29WS1BPUlJWN285REFBMFAxek01dEcxR1h6OWtYS1NyRzhva3BHT1I1UHRuCm9qdXV4dlJCNm9aWDEwUHhRNWdBVEpjSlhqYy9nKzNFRXNlSTd6M1JDZk5ZOXVNSW9wVk9IelU1S2d1NlNzOEMKTXRQeFJaR1pEWnQ2MlArNFFPWm9oYWthWEt4NUlSczNUMUo4YVJZU2FVZmR3RWwzZDBqcHQ1OTZLcHFJNUtFWgpEajJ4VklnK3plUWRJU3M4ME0waUROSlVSQ29qVjdIdTg3Tkl3S1Q0T2hkeDU3YWw4UUtDQVFFQS8wNDVnaHI5ClluRzg5bUJmZVVJb1Yra2pnYUk0SXcxbmlYWUY5SHczM1RjRGtYV1NSenhVdmYwOEs5UHhJcDNZdkRmMFUxQTgKcmNobUJyWGlzdmkwbEsxcW5SUjNERFI3aWc0WlMyMDJTQk5rSzM3MjhFSkFJQzRBNmd5bU9yeU9SREgxNDAyagp3OHJFNjNMYWRma2pQb0p3M1ZCYnhUME1lNFg3c2JRMFBHNnppZzVIVmhkUUhxZEk3aEk0V0tYL3h4QWNSSkhLCm1nNVdxYTUwamJRZ3NMblhyQUNwN1JEZnhrYXhLbkdOanloRkh5TDdnMzVCNEIyeGovQUNKUzM5eEhnNXVubEwKSkxsamVQaEJsK2R6cFVhOWE2TnAvak5LSkJCSGFRYmNIWjFSclJHcHByNVEzWmdSVC94dVFiTVlLRHhXVDljRgozc29kZFF5ZGRLbUZwUUtDQVFFQTFqbWtiOVlRK2UxcXB3V0MxV0p5RWZ6OTV6MzdTQ1pjUVZTUXpsd0c5M0hRCkg4TUMxTFN4NXN1TzVGZm4yZDkvaWV3Q0NId0NSMGsxa0pnWEJYUHdJalFrVGl5LzJPMTJEb2VleDhiUFpMTUkKSUFtT0VSVVNqbW12d2ZkWElhalAzbEttMmJxVjQvSnFDZGp5bU9Pam9yWlhrd0dIQUk5OS84Um5DYVpKUWpZYwpRUHB5ck1GdXNFZENHM0hldkEyUHAvMm9aeUVZUCtRQmpDa2JKQ0VaUndYaGV6b0FQbkl2bWtHVGtRaVZEcVNVCjJYTWtlN2k4aUs1L1daRGkyWVFJM2dsekpSanZkUHFJdEQvRStETFpSa1o1UFFNQkpSSWZocklONlFRYmJQODUKT0Z4NGR5dzJwRlFHVHZMSDZyckFtWnFvaXFGeXYvZnFSQ0VrQ3puaDd3S0NBUUJiTXlOaDhhaEFLV2NhRDlVcgpLTkhtalhiTWtSbENsRUEvSDNVREgvaUl3bVU0NmVubUhvd2JEa0lYV2UrU3NSWkNMaTdPTUNSczQrQm1WMFR6Ckw5cTZIYlN2QmlkOHFhYlQ2ek5uK1V4aHRPT2NrZzgrUmp4SUFvYjdGS2V3NWJoZ2JnUnJQVW5aNEM0MStXSkcKc0VmQnhiRHhyZ29LVEVPUVFJMW5ybnJXZDZrVkVRSzBvMEZRb2V0d2QvdSsxeFdtazMrMWt1cnYyMTFqNGRqcQo0Y1Nudk10cE94ZDRnd1djKzVYQUZxNDl6R0hjdkk5aUtwRDNzVVBEcWpYcCtDTGxzeGpVSHc0VHdWSGlYYlI0CndncFNxUkZ6U1AzTSs1OXBnSk14MW14OCs3eTRlVTNFTGNvUFRvb29xNERyWVVHbzVkempTbWxqYTRuWVRUaFYKKzFTdEFvSUJBR0ZJK0JZWnZzZmhPNmZ4NXNLRTNJeXl1Wk9FSUZOWnFGZTYwYkFGTnR5MGdQR0xuQU9BczdHKwpDM3hETjNWSC9DRmtYbUFBQVFEaWpFTEg3dHg1RkRwVU41Q1EzZWJqbjlObFg0UVdFeVVGOE5DcnhpcVh5VCtIClcxdll1V2I5eExpUURGbWdWR1dhTnZHVjVrWHNTdW1mcVJHSGhnbUpJSTFBWWhLTnc0TWdFNkNtbStFOFRzb2EKOGppSWM4QXU0R2hIMTJ4T0tUY0trbkZXVVk4TXdPL3lDYjN1VHlJTXRQVjJoazg4K0lRWDFja1NjeVVFZGdvVQpSSjBtSVA3cTZTUDhZcUFjUE5LQTNBZ1BWYUhwWmFaMlpxU0Fjc3FrK2xBdkdBWVQ2V2lNVnkzelFIbk9TRnBFCkZrRlFHOTNMUlovOERrSTJvMmZ1YkNMWWNnZnZGMTBDZ2dFQkFQbW5EM0xtb0JzVy9nYXd6bXR6MDhZNm1OaEIKZi9uWmhqMUZ2eEZYdDQyMEUvUGNjRjBOdGhKNHF0ZkpoRmI1cGNCazRIRUs1TzNPNzdrdWdnc1M3aS9wbDRydwp2REpJbEhKZ0oyT1VXZGZ1ZHFWaFc4c1NxOUN5Z0UwY0ZCZjU1TkgrQUk5QWhBUDNUc09xUjlocVlWVlk3VXVhCnd2NmJMcHZ2MFpQc2VJYWhPN3hwOEc1RWRaQmV0d1I5ejJ5MWVGZDllNWVMUE11ZjJpOWY1QW1KbjhibU82SkgKbHNvbEgwNTRjQ2V6N242YnMwSUxYMUI4aXA5eG5CVWNsM1VxbUFieEVoZEh0N2JqWUNGRFg2NEx4aDFrN21BLwpRUklkNXNWeDdmR0xsb25abG1pK3crWjkyNGxXYk14eUNiVyt6UFkvbEd6c0dSaldmcUVwOVZOZXpTOD0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
    token: d2311d49f2021eafece8dbd821116189c40267cc91ba669aa51ed1e0459512237a878e20b0d807d83e057ed64aba3239f192e624157f92277694b7e17d97c9c2

